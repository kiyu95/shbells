<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="true">
    <title>학교종이 땡땡땡</title>
    <link rel="icon" type="image/png" href="/favicon/favicon.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="/css/global.css" type="text/css">
    <link rel="stylesheet" href="/css/rank.css" type="text/css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

</head>
<body    style=" width: 100%;
          height: 100%;
          display: flex;
          position: fixed; ">
<div class="pyro">
    <div class="before"></div>
    <div class="after"></div>
</div>
<header class="navbox">
    <nav>
        <h1>
            <button class="main" onclick="location.href='/main/main'">
                학교종이 땡땡땡
            </button>
        </h1>
        <ul>
            <li>
                <button class="ranking" onclick="location.href='/rank/rank'">
                    랭킹
                </button>
            </li>
            <li>
                <button class="calendar" onclick="location.href='/calendar/calendar'">
                    캘린더
                </button>
            </li>
            <li>
                <button class="student-management" onclick="location.href='/management/student_manage'">
                    학생관리
                </button>
            </li>
            <li>
                <button class="mypage" onclick="location.href='/school/mypage_info'">
                    마이페이지
                </button>
            </li>
        </ul>
    </nav>
</header>

    <article class="rank">
        <!---------------------------반 랭킹-------------------------------------->
        <div class="rank-total">
            <div class="rank-main">
                <div class="rank-main-1">종합순위</div>
                <div class="category-button"><button class="category-button-1" id="popupClick">테마</button></div>
            </div>
            <div class="ranking-page">
                <div class="ranking-page-1">등수 <br>
                    <p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p>
                </div>
                <div class="ranking-page-2">이름</div>
                <div class="ranking-page-3">점수</div>
            </div>
            <div class="studenttb">
                <table id="studenttb">
                    <tr th:each="student : ${students}">   <!--foreach 문 표현식-->
                        <td th:text="${student.name}" style="background-color: white"></td>
                        <td th:text="${student.score}" style="background-color: white"></td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="popup">
            <div class="popup-div">
                <button class="popup1-button" onclick="location.href='temaRank1'">배려</button>
                <button class="popup1-button" onclick="location.href='temaRank2'">사교</button>
                <button class="popup1-button" onclick="location.href='temaRank3'">긍정</button>
                <button class="popup1-button" onclick="location.href='temaRank4'">책임</button>
                <button class="popup1-button" onclick="location.href='temaRank5'">성실</button>
                <button class="popup1-button" onclick="location.href='temaRank6'">도움</button>
                <button class="popup1-button" onclick="location.href='temaRank7'">예의</button>
                <button class="popup1-button" onclick="location.href='temaRank8'">봉사</button>
                <button class="popup1-button" onclick="location.href='temaRank9'">리더십</button>
                <button class="popup1-button" onclick="location.href='temaRank10'">끈기</button>
            </div>
        </div>
        <!-----------------------------테마별 1등---------------------------------------->
        <div class="rank-winner">
            <div class="rank-box">테마별 1등</div>
                <div class="rank-winner-1">
                    <table id="ranktb">
                        <tr th:each="rank1 : ${ranking}">   <!--foreach 문 표현식-->
                            <td><i class="bi bi-trophy" id="trophy"></i> </td>
                            <td th:text="${rank1.categoryName}" style="background-color: white"></td>
                            <td th:text="${rank1.name}" style="background-color: white"></td>
                            <td th:text="${rank1.score}" style="background-color: white"></td>
                        </tr>
                    </table>
            </div>
        </div>
        <!---------------------------------랭킹단상------------------------------------->
        <div class="rank-platform">
            <div class="first-rank">
                <table>
                    <tr th:each="top : ${first}">
                        <td th:text="${top.name}" style="background-color: #FFE150"></td>
                    </tr>
                </table>
            </div>
            <div class="second-rank">
                <table>
                    <tr th:each="second : ${second}">
                        <td th:text="${second.name}" style="background-color: #FFE150"></td>
                    </tr>
                </table>
            </div>
            <div class="third-rank">
                <table>
                    <tr th:each="third : ${third}">
                        <td th:text="${third.name}" style="background-color: #FFE150"></td>
                    </tr>
                </table>
            </div>

        </div>
    </article>

<script>




    document.getElementById('popupClick').addEventListener('click', function(event) {
        let popup = document.querySelector('.popup');

        // 마우스 클릭 이벤트의 발생 위치를 가져옴
        let mouseX = event.pageX;
        let mouseY = event.pageY;

        // 팝업을 마우스 클릭 위치 옆에 표시 (예: 오른쪽 10px, 아래 10px)
        popup.style.left = (mouseX + 40) + 'px';
        popup.style.top = (mouseY + 20) + 'px';

        // 팝업을 보이도록 설정
        popup.style.display = 'block';
    });

    document.addEventListener('click', function (event) {
        let popup = document.querySelector('.popup');

        // 팝업 외부를 클릭하거나 팝업 자체를 클릭하지 않았을 때 팝업을 숨김
        if (event.target !== popup && !popup.contains(event.target) && event.target !== document.getElementById('popupClick')) {
            popup.style.display = 'none';
        }
    });



</script>

</body>
</html>